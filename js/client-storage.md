## Cookies
কুকি হলো আপনার **কম্পিউটারে একটি ছোট টেক্সট ফাইল** হিসেবে সংরক্ষিত ডাটা। যখন ওয়েব সার্ভার ব্রাউজারে একটি ওয়েব পেজ পাঠায়, পাঠানোর পর ওয়েব সার্ভার ও ব্রাউজারের সংযোগটি বন্ধ হয়ে যায় এবং সার্ভার ব্যবহারকারীর সম্পর্কে সকল তথ্য ভুলে যায় কারণ সার্ভার এবং ব্রাউজারের সাথে তখন কোন সম্পর্ক থাকে না।

"কিভাবে **ব্যবহারকারীর সম্পর্কে তথ্য** সংরক্ষন করা যায়" এই সমস্যা সমাধান করার জন্যই কুকি উদ্ভাবিত হয়েছে।

- যখন একজন ব্যবহারকারী একটি ওয়েবপেজে ভিজিট করে তখন **তার নাম** কুকি হিসেবে সংরক্ষন করা যায়।
- পরবর্তী সময়ে ব্যবহারকারী যখন ঐ পেজে ভিজিট করে তখন **কুকি তাকে চিনতে** পারে।

কুকিগুলোয় **জোড়ায় জোড়ায় (name-value)** ডাটা সংরক্ষণ করে।

### Creating cookie using JS
`document.cookie` প্রোপার্টির মাধ্যমে জাভাস্ক্রিপ্ট কুকি তৈরি করতে পারে, পড়তে পারে এবং ডিলেট করতে পারে।

```js
document.cookie = "username = app";
```

এছাড়াও আপনি কুকির মেয়াদ শেষ হওয়ার তারিখ(**expiry date**) নির্ধারণ করতে পারেন(UTC সময়ে)। ডিফল্টভাবে ব্রাউজার বন্ধ করার সাথে সাথে কুকি ডিলেট হয়ে যায়।

```js
document.cookie="username= javascript-bootcamp; expires=Mon, 18 Dec 2025 12:00:00 UTC; path=/";
```

### জাভাস্ক্রিপ্টের মাধ্যমে নিম্নলিখিত উপায়ে কুকি পড়া যায়ঃ

```js
var x = document.cookie;
```

document.cookie একটি স্ট্রিংয়ে সকল কুকিগুলো অনেকটা এইভাবে রিটার্ন করা হয়ঃ `cookie1=value; cookie2=value; cookie3=value;`

### কুকি স্ট্রিং
document.cookie প্রোপার্টিটি দেখতে সাধারন টেক্সট স্ট্রিংয়ের মতো দেখায়। কিন্তু **এটি সাধারণ স্ট্রিং নয়**। এমনকি আপনি যদি document.cookie তে একটি সম্পূর্ণ কুকি স্ট্রিং লিখেন, যখন আপনি এটি আবার পড়তে যাবেন ,তখন আপনি শুধু **name-value এর জোড়ায় জোড়ায়** দেখতে পাবেন। আপনি যদি একটি নতুন কুকি সেট করেন, পুরাতন কুকি মুছে যায় না। নতুন কুকি document.cookie তে যোগ হয়, যদি আপনি পুনরায় document.cookie পড়তে যান তাহলে এমন কিছু দেখতে পাবেনঃ `cookie1=value; cookie2=value;`

```js
// Cookie string sample
document.cookie = "username=Jason Roy; expires=Thu, 14 Nov 2010 12:00:00 UTC";
```

আপনি যদি একটি সুনির্দিষ্ট কুকির ভ্যালু খুজে পেতে চান, তাহলে আপনাকে অবশ্যই একটি জাভাস্ক্রিপ্ট ফাংশন লিখতে হবে।

### কুকি সেট করার ফাংশন
প্রথমে আমরা একটি ফাংশন তৈরি করি যা ভিজিটরের নাম একটি কুকি ভ্যারিয়েবলে সংরক্ষন করবে।
```js
function setCookie(cname, cvalue, exdays) {
    var date = new Date();
    date.setTime(date.getTime() + (exdays*24*60*60*1000));
    var expires = "expires="+date.toUTCString();
    document.cookie = cname + "=" + cvalue + "; " + expires;
}
```

### কুকি পাওয়ার ফাংশন
তারপর আমরা একটি ফাংশন তৈরি করি যেটি কুকির ভ্যালু রিটার্ণ করবে।

```js
function getCookie(cname) {
    var name = cname + "=";
    var ca = document.cookie.split(";");
    for(var i=0; i<ca.length; i++) {
        var c = ca[i];
        while (c.charAt(0) == " ") c = c.substring(1);
        if (c.indexOf(name) == 0) return c.substring(name.length, c.length);
    }
    return "";
}
```

কুকির নাম(cname) প্যারামিটার হিসেবে নেয়। অনুসন্ধানের জন্য `cname + "="` টেক্সটের সাহায্যে একটি ভ্যারিয়েবল(name) তৈরি করেছি। document.cookie কে সেমিকোলনে বিভক্ত করে c`a(ca = document.cookie.split(";"))` অ্যারেতে রাখি। ca অ্যারেতে লুপের মাধ্যমে অ্যারের প্রতিটি মান পড়ি। যদি কুকি খুজে পাওয়া যায় `(c.indexOf(name) == 0)`,তাহলে কুকি ভ্যালু রিটার্ন করে। আর যদি কুকি না পাওয়া যায়, তাহলে "" রিটার্ন করে।

### কুকি চেক করার ফাংশন

সর্বশেষ,আমরা একটি ফাংশন তৈরি করি যা দিয়ে কুকি সেট হয়েছে কিনা তা চেক করে। যদি কুকি সেট করা থাকে তাহলে এটি একটি স্বাগত বার্তা প্রদর্শন করবে। আর যদি কুকি সেট করা না থাকে তাহলে setCookie ফাংশন কল করার মাধ্যমে ইহা একটি প্রোম্পট(prompt) বক্স প্রদর্শন করে ব্যবহারকারীর নাম চাইবে এবং ৩৬৫ দিনের জন্য ব্যবহারকারীর নাম সংরক্ষন করবে।

```js
function checkCookie() {
    var username = getCookie("username");
    if (username != "") {
        alert("Welcome " + username + "!");
    } else{
        username = prompt("Please enter your name:", "");
        if (username != "" && username != null) {
            setCookie("username", username, 365);
        }
    }
}
```

## অথেন্টিকেশনে কুকির ব্যবহার
অথেন্টিকেশনে কুকির ব্যবহার রয়েছে। সার্ভার এ লগিন হওয়ার পর সার্ভার একটি **এক্সেস টোকেন** জেনারেট করে যেটি ডাটাবেজে ইউজার এর তথ্য হিসেবে রাখা থাকে। এই এক্সেস টোকেনটি একটি কুকি তে, expiration time দিয়ে সেট করা হয়। পরবর্তীতে **সার্ভার ও ক্লায়েন্ট এর মধ্যে প্রতিটি রিকুয়েস্ট এবং রেসপন্স এ কুকি টি এটাচ** করে দেওয়া হয় এবং রিকুয়েস্ট এর ভ্যালিডিটি চেক করা হয়।
```js
let date = new Date(); data.setTime(date.getTime() + (2*60*60));
let access_token = 'sa4343j223r5j3243';
document.cookie = "access_token" + "=" + access_token + "expires=" + date.toUTCString();
```

## Local Storage
আমাদের মনে প্রশ্ন আসতে পারে ডাটা রাখার জন্য তো ইতিমধ্যে কুকিজ আছে. তাহলে আবার এই localStorage বা sessionStorage এর দরকার কি?

- ওয়েব স্টোরেজ অবজেক্টগুলো প্রতিটি অনুরোধের সাথে সার্ভারে পাঠানো হয় না। যে কারণে, আমরা আরো অনেক ডাটা সংরক্ষণ করতে পারি. বেশিরভাগ ব্রাউজার কমপক্ষে **2 মেগাবাইট ডেটা** (বা তার বেশি) অনুমতি দেয় এবং সেটি কনফিগার করার জন্য সেটিংস থাকে।
- সার্ভার HTTP হেডারের মাধ্যমে স্টোরেজ অবজেক্টগুলিকে ম্যানিপুলেট করতে পারে না। জাভাস্ক্রিপ্টেই সবকিছু করা হয়ে থাকে।

উভয় স্টোরেজ অবজেক্ট একই পদ্ধতি এবং বৈশিষ্ট্য প্রদান করে: for example: `setItem()`

এছাড়াও পুরো স্টোরেজ অবজেক্টকে স্ট্রিং করা সম্ভব, যেমন ডিবাগিং উদ্দেশ্যে।
```js
alert( JSON.stringify(localStorage, null, 2) );
```